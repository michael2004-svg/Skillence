<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skillence - Join Us</title>
    <link rel="stylesheet" href="../styles/joinus.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="auth-container">
        <div class="logo-section">
            <div class="logo">
                <i>S</i>
            </div>
            <h1 class="welcome-text">Welcome to Skillence</h1>
            <p class="subtitle">Sign in to your account</p>
        </div>

        <!-- Status Message -->
        <div id="status-message" class="status-message"></div>

        <!-- Auth Form (Sign In / Sign Up) -->
        <div id="auth-form" class="auth-form">
            <!-- Full Name (Sign Up only) -->
            <div class="form-group" id="name-field" style="display: none;">
                <input 
                    type="text" 
                    id="fullName" 
                    class="form-input" 
                    placeholder="Full Name" 
                    autocomplete="name"
                    aria-label="Full Name"
                    maxlength="100"
                >
                <div class="help-text">Enter your first and last name</div>
            </div>

            <!-- Email -->
            <div class="form-group">
                <input 
                    type="email" 
                    id="email" 
                    class="form-input" 
                    placeholder="Email address" 
                    autocomplete="email"
                    aria-label="Email address"
                    required
                >
                <div class="help-text">We'll never share your email with anyone</div>
            </div>

            <!-- Password -->
            <div class="form-group">
                <div class="password-input-wrapper">
                    <input 
                        type="password" 
                        id="password" 
                        class="form-input" 
                        placeholder="Password" 
                        autocomplete="current-password"
                        aria-label="Password"
                        minlength="6"
                        required
                    >
                    <button type="button" id="togglePassword" class="toggle-password-btn" aria-label="Show password">
                        üëÅÔ∏è
                    </button>
                </div>
                <div class="help-text">Use at least 6 characters for security</div>
                <!-- Password strength indicator (dynamically added) -->
            </div>

            <!-- Remember Me (Sign In only) -->
            <div class="form-options" id="rememberMeContainer" style="display: flex;">
                <label class="remember-me-label">
                    <input type="checkbox" id="rememberMe" class="remember-me-checkbox">
                    <span class="remember-me-text">Remember me</span>
                </label>
            </div>

            <!-- Action Buttons -->
            <div class="btn-container">
                <button id="signInBtn" class="btn btn-primary" aria-label="Sign in to your account">
                    Sign In
                </button>
                <button id="signUpBtn" class="btn btn-primary" style="display: none;" aria-label="Create new account">
                    Create Account
                </button>
            </div>

            <!-- Forgot Password Link (Sign In only) -->
            <div class="forgot-password-container" id="forgotPasswordContainer">
                <a href="#" id="forgotPasswordLink" class="forgot-password-link">
                    üîë Forgot your password?
                </a>
            </div>

            <!-- Resend Email Button -->
            <div class="resend-email-container">
                <button id="resendEmailBtn" class="btn-link" style="display: none;">
                    üìß Resend Confirmation Email
                </button>
            </div>

            <!-- Toggle Mode -->
            <div class="mode-toggle">
                <span class="mode-text" id="mode-text">Don't have an account? </span>
                <a href="#" id="mode-link" class="mode-link">Create one</a>
            </div>
        </div>

        <!-- Forgot Password Form -->
        <div id="forgot-password-form" class="forgot-password-form" style="display: none;">
            <div class="forgot-password-header">
                <h3 class="forgot-password-title">Reset Your Password</h3>
                <p class="forgot-password-subtitle">Enter your email and we'll send you a reset link</p>
            </div>

            <div class="form-group">
                <input 
                    type="email" 
                    id="resetEmail" 
                    class="form-input" 
                    placeholder="Email address" 
                    autocomplete="email"
                    aria-label="Email for password reset"
                    required
                >
                <div class="help-text">Enter the email you used to sign up</div>
            </div>

            <div class="btn-container">
                <button id="sendResetBtn" class="btn btn-primary">
                    üìß Send Reset Link
                </button>
            </div>

            <div class="back-to-signin-container">
                <a href="#" id="backToSignIn" class="back-link">
                    ‚Üê Back to Sign In
                </a>
            </div>
        </div>

        <!-- Signed In State -->
        <div id="signed-in-state" class="signed-in-state" style="display: none;">
            <div class="user-avatar">
                <i>üë§</i>
            </div>
            <div class="user-email" id="user-email"></div>
            <div class="user-status" id="verificationStatus">Checking status...</div>
            <div class="session-info">
                <p class="session-text">Your session is active. You will be automatically logged out after 30 minutes of inactivity.</p>
            </div>
            <div class="btn-container">
                <button id="signOutBtn" class="btn btn-danger">
                    Sign Out
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loading-text">Processing...</p>
        </div>
    </div>

    <script src="../scripts/joinus.js"></script>
</body>
</html>