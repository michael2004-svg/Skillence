<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skillence App</title>
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="../styles/cv.css">
    <script src="https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.min.js"></script>
    <script src="https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="header">
        <div class="logo">
            <div class="logo-icon">S</div>
            <div class="logo-text">Skillence</div>
        </div>
        <div class="search-bar">
            <div class="search-icon">üîç</div>
            <input type="text" class="search-input" placeholder="What's on your mind?" id="searchInput">
        </div>
    </div>

    <!-- Home Tab Content -->
    <div class="tab-content active" id="home-tab">
        <div class="home-content" id="feedContainer">
            <div class="tab-content active" id="home-tab">
    <div class="home-content" id="feedContainer">
        <div class="loading-container" id="loadingContainer">
            <div class="spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>
</div>
        </div>
    </div>

    <!-- Profile Tab Content -->
    <div class="tab-content hidden" id="profile-tab">
        <div class="profile-content">
            <div class="profile-header">
                <h1 class="profile-title">Profile</h1>
                <div class="profile-avatar">
                    <img src="../images/default.jpg" id="profileAvatar">
                </div>
                <h2 class="profile-name" id="profile-job">Loading...</h2>
                <p class="profile-industry" id="profile-industry">Loading...</p>
                <p class="profile-experience" id="profile-experience">Loading...</p>
                <p class="profile-skills" id="profile-skills">Skills: Loading...</p>
                <p class="profile-goals" id="profile-goals">Goals: Loading...</p>
                <div class="skill-score-section">
                    <h3 class="skill-score-title">Skill Score: <span id="cv-score">75%</span></h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="cv-score-progress" style="width: 75%;"></div>
                    </div>
                </div>
                <div class="cv-info">
                    <p><strong>Industry:</strong> <span id="cv-industry">Not analyzed</span></p>
                    <p><strong>Top Skills:</strong> <span id="cv-skills">None listed</span></p>
                    <p><strong>Latest CV Analysis:</strong> <span id="cv-timestamp">No analysis available</span></p>
                </div>
                <div class="stats-container">
                    <div class="stat">
                        <div class="stat-number" id="followers-count">0</div>
                        <div class="stat-label">Followers</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="following-count">0</div>
                        <div class="stat-label">Following</div>
                    </div>
                </div>
                <button class="follow-btn" onclick="toggleFollow()">Follow</button>
                <button id="sign-out-btn" class="sign-out-btn">Sign Out</button>
                <p id="status-message"></p>
            </div>
        </div>
    </div>

    <!-- Notifications Tab Content -->
    <div class="tab-content hidden" id="notifications-tab">
        <div class="notifications-content">
            <div class="notification-item unread" onclick="markAsRead(this)">
                <div class="notification-icon like">‚ù§Ô∏è</div>
                <div class="notification-content">
                    <div class="notification-text"><strong>Mike Chen</strong> liked your post about JavaScript frameworks</div>
                    <div class="notification-time">2 minutes ago</div>
                </div>
                <div class="notification-badge"></div>
            </div>
            <div class="notification-item" onclick="markAsRead(this)">
                <div class="notification-icon follow">üë§</div>
                <div class="notification-content">
                    <div class="notification-text"><strong>Sarah Johnson</strong> started following you</div>
                    <div class="notification-time">1 hour ago</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Post Tab Content -->
    <div class="tab-content hidden" id="add-post-tab">
        <div class="add-post-content">
            <div class="create-post-container">
                <h2 class="create-post-title">Create New Post</h2>
                <div class="post-form">
                    <div class="user-info">
                        <div class="user-avatar">
                            <img src="../images/default.jpg" id="createPostAvatar">
                        </div>
                        <div class="user-details">
                            <div class="user-name" id="createPostName">Loading...</div>
                            <div class="post-visibility">
                                <select class="visibility-select">
                                    <option value="public">üåç Public</option>
                                    <option value="connections">üë• Connections only</option>
                                    <option value="private">üîí Only me</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="post-input-container">
                        <textarea class="post-textarea" placeholder="What would you like to share with your network?" maxlength="280" oninput="updateCharCount(this)"></textarea>
                        <div class="char-count">
                            <span id="char-counter">0</span>/280
                        </div>
                    </div>
                    <div class="post-options">
                        <div class="media-options">
                            <input type="file" id="postImage" accept="image/*" style="display: none;" onchange="previewPostImage(this)">
                            <button class="media-btn" onclick="document.getElementById('postImage').click()" title="Add Image">üì∑</button>
                            <button class="media-btn" onclick="handleMediaUpload('video')" title="Add Video">üé•</button>
                            <button class="media-btn" onclick="handleMediaUpload('document')" title="Add Document">üìé</button>
                            <button class="media-btn" onclick="addPoll()" title="Create Poll">üìä</button>
                            <button class="media-btn" onclick="addCelebration()" title="Celebrate">üéâ</button>
                        </div>
                        <div class="image-preview" id="imagePreview" style="display: none;">
                            <img id="previewImage" src="" alt="Image Preview" style="max-width: 100%; max-height: 200px;">
                            <button class="remove-image" onclick="removePostImage()">Remove</button>
                        </div>
                    </div>
                    <div class="post-actions">
                        <button class="cancel-btn" onclick="cancelPost()">Cancel</button>
                        <button class="post-btn" onclick="publishPost()" disabled>Post</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Career Tab Content -->
    <div class="tab-content hidden" id="career-tab">
        <div class="career-content">
            <div class="features-grid">
                <div class="feature-card" onclick="handleFeatureClick('cv-analyzer')">
                    <div class="feature-icon">üìã</div>
                    <div class="feature-title">CV Analyzer</div>
                </div>
                <div class="feature-card" onclick="handleFeatureClick('jobs')">
                    <div class="feature-icon">üíº</div>
                    <div class="feature-title">Jobs</div>
                </div>
                <div class="feature-card" onclick="handleFeatureClick('courses')">
                    <div class="feature-icon">üéì</div>
                    <div class="feature-title">Courses</div>
                </div>
                <div class="feature-card" onclick="handleFeatureClick('mentorship')">
                    <div class="feature-icon">ü§ù</div>
                    <div class="feature-title">Mentorship</div>
                </div>
            </div>
            <div class="jobs-section hidden" id="jobsSection">
                <div class="jobs-header">
                    <h2 class="jobs-title">Job Opportunities</h2>
                    <div class="jobs-search">
                        <input type="text" id="jobsSearchWhat" placeholder="Job title or keywords (e.g., Software Engineer)" class="search-input">
                        <input type="text" id="jobsSearchWhere" placeholder="Location (e.g., London)" class="search-input">
                        <button class="search-btn" onclick="searchJobs()">Search Jobs</button>
                    </div>
                </div>
                <div class="jobs-list" id="jobsList">
                    <p>Loading jobs...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- CV Analyzer Tab Content -->
    <div class="tab-content hidden" id="cv-analyzer-tab">
        <div class="cv-analyzer-content">
            <div class="cv-analyzer-header">
                <h2 class="cv-analyzer-title">CV Analyzer</h2>
                <p class="cv-analyzer-subtitle">Upload your CV and get instant AI-powered analysis and recommendations</p>
            </div>
            <div class="job-description-container">
                <textarea id="jobDescription" class="job-description-input" placeholder="Paste job description here (optional)"></textarea>
            </div>
            <div class="upload-container" id="uploadContainer">
                <div class="upload-icon">üìÑ</div>
                <div class="upload-text">Drag & Drop Your CV Here</div>
                <div class="upload-hint">Or click to browse files ‚Ä¢ Supports PDF, DOC, DOCX ‚Ä¢ Max 10MB</div>
                <input type="file" id="cvUpload" class="file-input" accept=".pdf,.doc,.docx" />
                <button class="upload-btn" onclick="document.getElementById('cvUpload').click()">
                    Choose File
                </button>
                <button class="analyze-btn" id="analyzeBtn" onclick="uploadCV()">
                    <span id="btnText">Analyze CV</span>
                    <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                        <div class="spinner"></div>
                        Analyzing...
                    </div>
                </button>
            </div>
            <div class="file-info" id="fileInfo">
                <div class="file-name" id="fileName"></div>
                <div class="file-details">
                    <span id="fileSize"></span>
                    <span id="fileType"></span>
                </div>
            </div>
            <div class="status-message" id="status-message"></div>
            <div class="result-container" id="result"></div>
            <div class="template-container hidden"></div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')" data-tab="home">
            <div class="nav-icon">üè†</div>
        </div>
        <div class="nav-item" onclick="switchTab('career')" data-tab="career">
            <div class="nav-icon">üíº</div>
        </div>
        <button class="add-button" onclick="switchTab('add-post')">
            <span>+</span>
        </button>
        <div class="nav-item" onclick="switchTab('notifications')" data-tab="notifications">
            <div class="nav-icon">üîî</div>
        </div>
        <div class="nav-item" onclick="switchTab('profile')" data-tab="profile">
            <div class="nav-icon">üë§</div>
        </div>
    </div>

    <script src="../scripts/core.js"></script>
    <script src="../scripts/cv_analyzer.js"></script>
    <script src="../scripts/jobs.js"></script>
    <script src="../scripts/feed.js"></script>
    <script src="../scripts/posts.js"></script>
</body>
</html>